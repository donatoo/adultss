<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Dynamic Iframe Loader</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f8f8f8; padding: 20px; }
    iframe {
      width: 100%;
      height: 80vh;
      border: none;
      background: #000;
    }
  </style>
</head>
<body>

<h2>Loading contentâ€¦</h2>
<iframe id="viewer"></iframe>

<script>
// Get ?id=xxx from URL
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

if (!id) {
    document.querySelector("h2").innerText = "Error: No ID provided in the URL.";
} else {
    loadURLFromText(id);
}

function loadURLFromText(id) {
    fetch("links.txt")
        .then(response => {
            if (!response.ok) throw new Error("Cannot load links.txt");
            return response.text();
        })
        .then(text => {
            const lines = text.split("\n");

            let foundURL = null;
            for (let line of lines) {
                line = line.trim();
                if (line.startsWith(id + "=")) {
                    foundURL = line.split("=")[1].trim();
                    break;
                }
            }

            if (!foundURL) {
                document.querySelector("h2").innerText = "No URL found for ID: " + id;
                return;
            }

            // Load into iframe
            document.getElementById("viewer").src = foundURL;
            document.querySelector("h2").innerText = "Loaded content:";
        })
        .catch(err => {
            document.querySelector("h2").innerText = "Error loading file: " + err;
        });
}
</script>

</body>
</html>
